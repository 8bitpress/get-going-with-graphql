<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <link rel="icon" href="../../images/favicon.ico" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Mandi Wise" />
  <title>Get Going with GraphQL</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="../../css/web.min.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<div id="masthead">
<div class="close-button-wrapper">
<button id="masthead-close" type="button"><span>Close</span></button>
</div>
<header id="title-block-header">
<h1 class="title">Get Going with GraphQL</h1>
<p class="subtitle">Learn How to Build JavaScript Applications with Apollo Server and Apollo Client</p>
<p class="author">Mandi Wise</p>
</header>
<nav class="book-nav">
<ol class="front-matter-content">
<li><a href="../preface/index.html">Preface</a></li>
</ol>
<ol class="main-matter-content">
<li><a href="../chapter-01/index.html">Up and Running with GraphQL and Apollo Server</a></li>
<li><a href="../chapter-02/index.html">More on Queries</a></li>
<li><a href="../chapter-03/index.html">Mutating Data</a></li>
<li><a href="../chapter-04/index.html">Pagination and Search Queries</a></li>
<li><a href="../chapter-05/index.html">Documentation, Custom Scalars, and Custom Directives</a></li>
<li><a href="../chapter-06/index.html">Authentication and Authorization</a></li>
<li><a href="../chapter-07/index.html">React App Set-up</a></li>
<li><a href="../chapter-08/index.html">Apollo Client with User Authentication</a></li>
<li><a href="../chapter-09/index.html">Pagination, Mutations, and the Apollo Client Cache</a></li>
<li><a href="../chapter-10/index.html">Real-time Updates with Subscriptions</a></li>
</ol>
<ol class="back-matter-content">
<li><a href="../appendix-a/index.html">Appendix A</a></li>
<li><a href="../about-the-author/index.html">About the Author</a></li>
<li><a href="../changelog/index.html">Changelog</a></li>
</ol>
<img src="../../images/8bp-logo-white.svg" class="logo" alt="8-Bit Press Inc. logo" />
</nav>
</div>
<div id="chapter">
<div class="chapter-nav">
<nav id="TOC" role="doc-toc">
<button id="masthead-open" type="button"><span>Book Navigation</span></button>
<h2 id="toc-title">Contents</h2>
<ul>
<li><a href="#react-app-set-up">Chapter 7: React App Set-up</a>
<ul>
<li><a href="#create-a-react-app">Create a React App</a></li>
<li><a href="#add-tailwind-css">Add Tailwind CSS</a></li>
<li><a href="#install-react-router">Install React Router</a></li>
<li><a href="#style-the-main-layout">Style the Main Layout</a></li>
<li><a href="#style-the-login-page-layout">Style the Login Page Layout</a></li>
<li><a href="#summary">Summary</a></li>
</ul></li>
</ul>
</nav>
</div>
<div class="content">
<h1 id="react-app-set-up">Chapter 7: React App Set-up</h1>
<div class="boxout">
<p>In this chapter, we will:</p>
<ul>
<li>Bootstrap a React application and use Tailwind CSS to add a basic layout and styles</li>
<li>Add React Router as a routing solution for the single-page React application</li>
<li>Add routes for the index, home, and login pages</li>
<li>Add a generalized layout to the index and home pages</li>
<li>Add a form for existing users to log in and new users to sign up on the login page</li>
</ul>
</div>
<h2 id="create-a-react-app">Create a React App</h2>
<p>Bibliotech’s GraphQL API is ready to go so it’s finally time to start working on the client application. Our high-level plan to build out the front-end includes the following tools:</p>
<ul>
<li><a href="https://create-react-app.dev/">Create React App</a> to generate the boilerplate React application</li>
<li><a href="https://tailwindcss.com/">Tailwind CSS</a> as a style library to rapidly build out a modern user interface</li>
<li><a href="https://www.apollographql.com/docs/react/">Apollo Client</a> to make queries to our GraphQL API</li>
</ul>
<p>This chapter will focus on laying the groundwork for the Bibliotech client application, so we’ll add the basic layout and create some initial routes for now, then shift our focus to Apollo Client in Chapter 8. To begin, we need a starter React application to work with, so we’ll use the Create React App CLI tool to scaffold one. From the root directory of your project code (in other words, one level up from <code>server</code>), create a new React application using <code>create-react-app</code>:</p>
<div class="highlight"><pre><span></span>npx create-react-app@4.0.3 client --use-npm
</pre></div>

<p>We’ll continue using npm on the client side, so the <code>--use-npm</code> flag ensures Create React App uses npm to install dependencies even if Yarn has been installed locally. Next, we’ll jump into the new <code>client</code> directory to see what was installed. The directory structure will look like this:</p>
<div class="highlight"><pre><span></span>client
├── node_modules/
|   └── ...
├── public /
|   └── favicon.ico
|   └── index.html
|   └── logo192.png
|   └── logo512.png
|   └── manifest.json
|   └── robots.txt
├── src
|   └── App.css
|   └── App.js
|   └── App.test.js
|   └── index.css
|   └── index.js
|   └── logo.svg
|   └── reportWebVitals.js
|   └── setupTests.js
├── .gitignore
├── package-lock.json
├── package.json
├── README.md
</pre></div>

<p>You can remove the <code>.gitignore</code> file and default <code>README.md</code> that were added here if you like. Next, if we take a look in <code>package.json</code>, we’ll see that the <code>create-react-app</code> installation process installed three dependencies in our app (<code>react</code>, <code>react-dom</code>, and <code>react-scripts</code>) and we also have four different scripts we can run:</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="c1">// ...</span>
  <span class="s2">&quot;scripts&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;start&quot;</span><span class="o">:</span> <span class="s2">&quot;react-scripts start&quot;</span><span class="p">,</span>
    <span class="s2">&quot;build&quot;</span><span class="o">:</span> <span class="s2">&quot;react-scripts build&quot;</span><span class="p">,</span>
    <span class="s2">&quot;test&quot;</span><span class="o">:</span> <span class="s2">&quot;react-scripts test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;eject&quot;</span><span class="o">:</span> <span class="s2">&quot;react-scripts eject&quot;</span>
  <span class="p">},</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>

<p>Let’s run the <code>start</code> script to start up the client application locally:</p>
<div class="highlight"><pre><span></span>npm start
</pre></div>

<p>The React app will now be accessible at <a href="http://localhost:3000/">http://localhost:3000</a>:</p>
<p><img src="../../images/screenshots/cra-boilerplate.png" alt="Homepage of a new Create React App application" /><br />
</p>
<p>Now we’ll strip down the starter files and code to the bare essentials. First, we’ll delete the <code>App.js</code>, <code>App.css</code>, <code>App.test.js</code>, <code>logo.svg</code>, <code>reportWebVitals.js</code>, and <code>setupTests.js</code> files from <code>client/src</code>. Then we’ll replace the starter code in <code>index.js</code> with the following:</p>
<p></p>
<div class="code-context">
<p>client/src/index.js</p>
</div>
<div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">ReactDOM</span> <span class="nx">from</span> <span class="s2">&quot;react-dom&quot;</span><span class="p">;</span>

<span class="kr">import</span> <span class="s2">&quot;./index.css&quot;</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hello, world!<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>

<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(&lt;</span><span class="nt">App</span> <span class="p">/&gt;,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;root&quot;</span><span class="p">));</span>
</pre></div>

<p>The revamped file and folder structure in <code>client</code> will look like this:</p>
<div class="highlight"><pre><span></span>client
├── node_modules/
|   └── ...
├── public /
|   └── favicon.ico
|   └── index.html
|   └── logo192.png
|   └── logo512.png
|   └── manifest.json
|   └── robots.txt
├── src
|   └── index.css
|   └── index.js
├── package-lock.json
├── package.json
</pre></div>

<p>We can also update the <code>title</code> element text in the <code>client/public/index.html</code> file to be something more relevant, such as “Bibliotech.” The running application will now look like this:</p>
<p><img src="../../images/screenshots/cra-no-styles.png" alt="A Create React App application with unneeded code and files removed" /><br />
</p>
<h2 id="add-tailwind-css">Add Tailwind CSS</h2>
<p>Using Tailwind to style our application’s components will take some initial configuration. First, we need to install Tailwind and some PostCSS-related packages as development dependencies:</p>
<div class="highlight"><pre><span></span>npm i -D tailwindcss@npm:@tailwindcss/postcss7-compat@2.0.3 @tailwindcss/postcss7-compat@2.0.3 postcss@7.0.34 autoprefixer@9.8.6
</pre></div>

<p>Next, because Create React App doesn’t have built-in support for overriding the PostCSS configuration, we’ll have to install CRACO as a regular dependency:</p>
<div class="highlight"><pre><span></span>npm i @craco/craco@6.1.1
</pre></div>

<p>The <code>craco</code> CLI must now be used in lieu of <code>react-scripts</code> for the <code>start</code>, <code>build</code>, and <code>test</code> scripts in the client’s <code>package.json</code> file:</p>
<p></p>
<div class="code-context">
<p>client/package.json</p>
</div>
<div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="c1">// ...</span>
  <span class="s2">&quot;scripts&quot;</span><span class="o">:</span> <span class="p">{</span>
<span class="hll">    <span class="s2">&quot;start&quot;</span><span class="o">:</span> <span class="s2">&quot;craco start&quot;</span><span class="p">,</span>
</span><span class="hll">    <span class="s2">&quot;build&quot;</span><span class="o">:</span> <span class="s2">&quot;craco build&quot;</span><span class="p">,</span>
</span><span class="hll">    <span class="s2">&quot;test&quot;</span><span class="o">:</span> <span class="s2">&quot;craco test&quot;</span><span class="p">,</span>
</span>    <span class="s2">&quot;eject&quot;</span><span class="o">:</span> <span class="s2">&quot;react-scripts eject&quot;</span>
  <span class="p">},</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>

<p>To add the Tailwind and Autoprefixer PostCSS plugins, add a <code>craco.config.js</code> file to the <code>client</code> directory with the following code:</p>
<p></p>
<div class="code-context">
<p>client/craco.config.js</p>
</div>
<div class="highlight"><pre><span></span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">style</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">postcss</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;tailwindcss&quot;</span><span class="p">),</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;autoprefixer&quot;</span><span class="p">)]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div>

<p>From the <code>client</code> directory we’ll also generate a <code>tailwind.config.js</code> file with the minimum amount of configuration using the <code>tailwindcss</code> CLI:</p>
<div class="highlight"><pre><span></span>npx tailwindcss init
</pre></div>

<p>We should now have <code>tailwind.config.js</code> containing the following code:</p>
<p></p>
<div class="code-context">
<p>client/tailwind.config.js</p>
</div>
<div class="highlight"><pre><span></span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">purge</span><span class="o">:</span> <span class="p">[],</span>
  <span class="nx">darkMode</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// or &#39;media&#39; or &#39;class&#39;</span>
  <span class="nx">theme</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">extend</span><span class="o">:</span> <span class="p">{},</span>
  <span class="p">},</span>
  <span class="nx">variants</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">extend</span><span class="o">:</span> <span class="p">{},</span>
  <span class="p">},</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[],</span>
<span class="p">}</span>
</pre></div>

<p>Let’s update it to use the same system fonts as before:</p>
<p></p>
<div class="code-context">
<p>client/tailwind.config.js</p>
</div>
<div class="highlight"><pre><span></span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">purge</span><span class="o">:</span> <span class="p">[],</span>
  <span class="nx">darkMode</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// or &#39;media&#39; or &#39;class&#39;</span>
  <span class="nx">theme</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">extend</span><span class="o">:</span> <span class="p">{},</span>
<span class="hll">    <span class="nx">fontFamily</span><span class="o">:</span> <span class="p">{</span>
</span><span class="hll">      <span class="nx">sans</span><span class="o">:</span>
</span><span class="hll">        <span class="s2">&quot;-apple-system, BlinkMacSystemFont, &#39;Segoe UI&#39;, &#39;Roboto&#39;, &#39;Oxygen&#39;, &#39;Ubuntu&#39;, &#39;Cantarell&#39;, &#39;Fira Sans&#39;, &#39;Droid Sans&#39;, &#39;Helvetica Neue&#39;, sans-serif&quot;</span><span class="p">,</span>
</span><span class="hll">      <span class="nx">mono</span><span class="o">:</span> <span class="s2">&quot;source-code-pro, Menlo, Monaco, Consolas, &#39;Courier New&#39;, monospace&quot;</span>
</span><span class="hll">    <span class="p">},</span>
</span>  <span class="p">},</span>
  <span class="nx">variants</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">extend</span><span class="o">:</span> <span class="p">{},</span>
  <span class="p">},</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[],</span>
<span class="p">};</span>
</pre></div>

<p>Lastly, we’ll replace the code in the existing <code>index.css</code> file with the following three lines to import the Tailwind styles:</p>
<p></p>
<div class="code-context">
<p>client/src/index.css</p>
</div>
<div class="highlight"><pre><span></span><span class="p">@</span><span class="k">tailwind</span> <span class="nt">base</span><span class="p">;</span>
<span class="p">@</span><span class="k">tailwind</span> <span class="nt">components</span><span class="p">;</span>
<span class="p">@</span><span class="k">tailwind</span> <span class="nt">utilities</span><span class="p">;</span>
</pre></div>

<p>After the React application restarts, it should look similar to what it did before, but with the top page margin reset now:</p>
<p><img src="../../images/screenshots/tailwind-no-styles.png" alt="A React application with basic Tailwind styles applied" /><br />
</p>
<h2 id="install-react-router">Install React Router</h2>
<p>Before we put Tailwind to work laying out our application, let’s install React Router and configure a few basic routes. First, we’ll install React Router in the <code>client</code> directory:</p>
<div class="highlight"><pre><span></span>npm i react-router-dom@5.2.0
</pre></div>

<p>Next, we’ll add a <code>pages</code> directory to <code>client/src</code>. Inside of <code>pages</code>, we’ll create an <code>Index</code> directory to house the index page component and then add an <code>index.js</code> file to it with this code inside:</p>
<p></p>
<div class="code-context">
<p>client/src/pages/Index/index.js</p>
</div>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Index</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is the index page.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;;</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">Index</span><span class="p">;</span>
</pre></div>

<p>The index page will be what unauthenticated users see when they arrive at the application. Authenticated users will need to see a different page after they log in, so we’ll also set up a <code>Home</code> directory in <code>pages</code> with an <code>index.js</code> file with this code in it:</p>
<p></p>
<div class="code-context">
<p>client/src/pages/Home/index.js</p>
</div>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Home</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is a user&#39;s homepage.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;;</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">Home</span><span class="p">;</span>
</pre></div>

<p>Lastly, users will need somewhere to go to log into the application, so we’ll create <code>Login</code> page component too:</p>
<p></p>
<div class="code-context">
<p>client/src/pages/Login/index.js</p>
</div>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Login</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is the page where users authenticate.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;;</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">Login</span><span class="p">;</span>
</pre></div>

<p>Now we’ll add a <code>router</code> directory to <code>client/src</code> with another <code>index.js</code> file and use it to define the initial routes for the application:</p>
<p></p>
<div class="code-context">
<p>client/src/router/index.js</p>
</div>
<div class="highlight"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">Route</span><span class="p">,</span> <span class="nx">Switch</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;react-router&quot;</span><span class="p">;</span>

<span class="kr">import</span> <span class="nx">Index</span> <span class="nx">from</span> <span class="s2">&quot;../pages/Index&quot;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Home</span> <span class="nx">from</span> <span class="s2">&quot;../pages/Home&quot;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Login</span> <span class="nx">from</span> <span class="s2">&quot;../pages/Login&quot;</span><span class="p">;</span>

<span class="kr">export</span> <span class="kd">function</span> <span class="nx">Routes</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">Switch</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">Route</span> <span class="na">exact</span> <span class="na">path</span><span class="o">=</span><span class="s">&quot;/&quot;</span> <span class="na">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Index</span><span class="p">}</span> <span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nt">Route</span> <span class="na">exact</span> <span class="na">path</span><span class="o">=</span><span class="s">&quot;/home&quot;</span> <span class="na">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Home</span><span class="p">}</span> <span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nt">Route</span> <span class="na">exact</span> <span class="na">path</span><span class="o">=</span><span class="s">&quot;/login&quot;</span> <span class="na">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Login</span><span class="p">}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">Switch</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>We wrap our list of routes in a <code>Switch</code> component because it allows us to render a route exclusively. Without it, the <code>Route</code> component will render inclusively, meaning that more than one page could be rendered at a time in the user interface if its path matches. We also use the <code>exact</code> prop to ensure that the component for this route will only render if the <code>path</code> matches the <code>location.pathname</code> exactly (for example, all paths would match the top-level <code>/</code>, and we don’t want <code>Index</code> to render everywhere).</p>
<p>Now we can update our <code>App</code> component in the top-level <code>index.js</code> file. We’ll import the <code>BrowserRouter</code> from React Router and the <code>Routes</code> component first and then render the <code>Router</code> and <code>Routes</code> instead of the “Hello, world!” message:</p>
<p></p>
<div class="code-context">
<p>client/src/index.js</p>
</div>
<div class="highlight"><pre><span></span><span class="hll"><span class="kr">import</span> <span class="p">{</span> <span class="nx">BrowserRouter</span> <span class="nx">as</span> <span class="nx">Router</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;react-router-dom&quot;</span><span class="p">;</span>
</span><span class="kr">import</span> <span class="nx">ReactDOM</span> <span class="nx">from</span> <span class="s2">&quot;react-dom&quot;</span><span class="p">;</span>

<span class="hll"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Routes</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;./router&quot;</span><span class="p">;</span>
</span><span class="hll">
</span><span class="kr">import</span> <span class="s2">&quot;./index.css&quot;</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
<span class="hll">    <span class="p">&lt;</span><span class="nt">Router</span><span class="p">&gt;</span>
</span><span class="hll">      <span class="p">&lt;</span><span class="nt">Routes</span> <span class="p">/&gt;</span>
</span><span class="hll">    <span class="p">&lt;/</span><span class="nt">Router</span><span class="p">&gt;</span>
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(&lt;</span><span class="nt">App</span> <span class="p">/&gt;,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;root&quot;</span><span class="p">));</span>
</pre></div>

<p>We can see that our index page is rendered in the browser now:</p>
<p><img src="../../images/screenshots/react-app-initial-index-page.png" alt="Initial index route" /><br />
</p>
<p>Before moving on, navigate to <code>/home</code> and <code>/login</code> to ensure they render correctly.</p>
<h2 id="style-the-main-layout">Style the Main Layout</h2>
<p>Now back to styling. Tailwind provides a very powerful and robust collection of CSS classes that we’ll use to layout and style our React components. While it may seem a bit intimidating at first glance, after a few minutes of working with Tailwind’s classes you’ll likely start to find this CSS framework relatively intuitive.</p>
<p>For example, to style a basic red button with white text and rounded corners, we would add the following classes to a <code>button</code> element:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">button</span> 
  <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-red-500 hover:bg-red-700 font-semibold rounded px-4 py-2 text-white&quot;</span>
<span class="p">&gt;</span>
  Log In
<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</pre></div>

<p>Try pasting this code into the <a href="https://play.tailwindcss.com/">Tailwind playground</a> to see it in action. You can also try adding responsive styles by setting a base class for a particular element and then prefix additional classes with one of Tailwind’s predefined breakpoint widths as follows: <code>text-sm md:text-lg</code>.</p>
<p>Tailwind has <a href="https://tailwindcss.com/docs">excellent documentation</a> and it would be a good idea to take a quick look through it before proceeding with the rest of this chapter. If you’re ready, let’s jump in and use some Tailwind classes to style a reusable <code>Button</code> component that we’ll use for the “Log In” button in the application’s navigation bar. Add a <code>components</code> directory to <code>client/src</code> and add a <code>Button</code> directory inside of that with an <code>index.js</code> file containing the following code:</p>
<p></p>
<div class="code-context">
<p>client/src/components/Button/index.js</p>
</div>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Button</span><span class="p">({</span> <span class="nx">className</span><span class="p">,</span> <span class="nx">disabled</span><span class="p">,</span> <span class="nx">onClick</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">type</span> <span class="p">})</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">buttonClasses</span> <span class="o">=</span>
    <span class="s2">&quot;bg-red-500 hover:bg-red-700 font-semibold rounded px-4 py-2 shadow hover:shadow-md focus:outline-none focus:shadow-outline text-white text-sm sm:text-base&quot;</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">className</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">buttonClasses</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">buttonClasses</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">className</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">disabled</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">buttonClasses</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">buttonClasses</span><span class="si">}</span><span class="sb"> cursor-not-allowed`</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">button</span>
      <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">buttonClasses</span><span class="p">}</span>
      <span class="na">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">disabled</span><span class="p">}</span>
      <span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">onClick</span><span class="p">}</span>
      <span class="na">type</span><span class="o">=</span><span class="p">{</span><span class="nx">type</span><span class="p">}</span>
    <span class="p">&gt;</span>
      <span class="p">{</span><span class="nx">text</span><span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>

Button.defaultProps = <span class="p">{</span>
  <span class="nx">disabled</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">onClick</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{},</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;button&quot;</span>
<span class="p">};</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">Button</span><span class="p">;</span>
</pre></div>

<div class="boxout">
<p><code>Button</code> is the first component in this chapter to use props, and at a minimum, it would be a good idea to do some typechecking on any props we set up using React’s PropTypes library. Alternatively, you may wish to use Flow or TypeScript too.</p>
<p>For brevity’s sake, typechecking has been omitted from the <code>client</code> code in this book. You can read more about typechecking in the React documentation:</p>
<p><a href="https://reactjs.org/docs/typechecking-with-proptypes.html">https://reactjs.org/docs/typechecking-with-proptypes.html</a></p>
</div>
<p>Next, we’ll create a <code>NavBar</code> component to display the name of the application on the lefthand side of the header and a “Log In” button on the right:</p>
<p></p>
<div class="code-context">
<p>client/src/components/NavBar/index.js</p>
</div>
<div class="highlight"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">Link</span><span class="p">,</span> <span class="nx">useHistory</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;react-router-dom&quot;</span><span class="p">;</span>

<span class="kr">import</span> <span class="nx">Button</span> <span class="nx">from</span> <span class="s2">&quot;../Button&quot;</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">NavBar</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">history</span> <span class="o">=</span> <span class="nx">useHistory</span><span class="p">();</span>
  
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">header</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-white border-b border-gray-200 border-solid&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;flex flex-wrap items-center justify-between mx-auto max-w-screen-lg px-8 py-8 w-full&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">Link</span>
          <span class="na">to</span><span class="o">=</span><span class="s">&quot;/&quot;</span>
          <span class="na">className</span><span class="o">=</span><span class="s">&quot;text-black hover:text-gray-800 hover:no-underline mr-4&quot;</span>
        <span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Bibliotech<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">Link</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center sm:justify-end mt-2 sm:mt-0&quot;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">Button</span>
            <span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">event</span> <span class="p">=&gt;</span> <span class="p">{</span>
              <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
              <span class="nx">history</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;/login&quot;</span><span class="p">);</span>
            <span class="p">}}</span>
            <span class="na">text</span><span class="o">=</span><span class="s">&quot;Log In&quot;</span>
          <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">NavBar</span><span class="p">;</span>
</pre></div>

<p>Note that Tailwind completely resets the styles on all heading elements. In the code above, we could apply some styles directly to the <code>h1</code>, but we can also use Tailwind classes to style certain elements generically. To add some base styles to all <code>h1</code> elements in the application, add the following code in the <code>index.css</code> file directly after the <code>@tailwind base</code> import:</p>
<p></p>
<div class="code-context">
<p>client/src/index.css</p>
</div>
<div class="highlight"><pre><span></span><span class="p">@</span><span class="k">tailwind</span> <span class="nt">base</span><span class="p">;</span>
<span class="hll">
</span><span class="hll"><span class="nt">h1</span> <span class="p">{</span>
</span><span class="hll">  <span class="err">@apply</span> <span class="err">font-bold</span> <span class="err">leading-none</span> <span class="err">text-5xl</span><span class="p">;</span>
</span><span class="hll"><span class="p">}</span>
</span><span class="hll">
</span><span class="p">@</span><span class="k">tailwind</span> <span class="nt">components</span><span class="p">;</span>
<span class="p">@</span><span class="k">tailwind</span> <span class="nt">utilities</span><span class="p">;</span>
</pre></div>

<p>Now let’s build up a <code>MainLayout</code> component using the <code>NavBar</code> for the application header, rendering the component’s <code>children</code> in the main content area, and a <code>footer</code> element at the bottom of the page:</p>
<p></p>
<div class="code-context">
<p>client/src/components/MainLayout/index.js</p>
</div>
<div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">NavBar</span> <span class="nx">from</span> <span class="s2">&quot;../NavBar&quot;</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">MainLayout</span><span class="p">({</span> <span class="nx">children</span> <span class="p">})</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-gray-50&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;flex flex-col justify-between min-h-screen&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">NavBar</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;flex-auto flex flex-col max-w-screen-lg mx-auto px-8 py-6 w-full&quot;</span><span class="p">&gt;</span>
          <span class="p">{</span><span class="nx">children</span><span class="p">}</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">footer</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-white border-t border-gray-200 border-solid py-4&quot;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;text-center text-gray-700 text-sm sm:text-base&quot;</span><span class="p">&gt;</span>
              “A word after a word after a word is power.”<span class="p">{</span><span class="s2">&quot; &quot;</span><span class="p">}</span>
              <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;whitespace-no-wrap&quot;</span><span class="p">&gt;</span>– Margaret Atwood<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">footer</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">MainLayout</span><span class="p">;</span>
</pre></div>

<p>With this code in place, we can import this component into the <code>Index</code> component file and wrap the content in the <code>MainLayout</code>:</p>
<p></p>
<div class="code-context">
<p>client/src/pages/Index/index.js</p>
</div>
<div class="highlight"><pre><span></span><span class="hll"><span class="kr">import</span> <span class="nx">MainLayout</span> <span class="nx">from</span> <span class="s2">&quot;../../components/MainLayout&quot;</span><span class="p">;</span>
</span><span class="hll">
</span><span class="kd">function</span> <span class="nx">Index</span><span class="p">()</span> <span class="p">{</span>
<span class="hll">  <span class="k">return</span> <span class="p">(</span>
</span><span class="hll">    <span class="p">&lt;</span><span class="nt">MainLayout</span><span class="p">&gt;</span>
</span><span class="hll">      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is the index page.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span class="hll">    <span class="p">&lt;/</span><span class="nt">MainLayout</span><span class="p">&gt;</span>
</span><span class="hll">  <span class="p">);</span>
</span><span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">Index</span><span class="p">;</span>
</pre></div>

<p>And we can do the same for the <code>Home</code> component too:</p>
<p></p>
<div class="code-context">
<p>client/src/pages/Home/index.js</p>
</div>
<div class="highlight"><pre><span></span><span class="hll"><span class="kr">import</span> <span class="nx">MainLayout</span> <span class="nx">from</span> <span class="s2">&quot;../../components/MainLayout&quot;</span><span class="p">;</span>
</span><span class="hll">
</span><span class="kd">function</span> <span class="nx">Home</span><span class="p">()</span> <span class="p">{</span>
<span class="hll">  <span class="k">return</span> <span class="p">(</span>
</span><span class="hll">    <span class="p">&lt;</span><span class="nt">MainLayout</span><span class="p">&gt;</span>
</span><span class="hll">      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is a user&#39;s homepage.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span class="hll">    <span class="p">&lt;/</span><span class="nt">MainLayout</span><span class="p">&gt;</span>
</span><span class="hll">  <span class="p">);</span>
</span><span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">Home</span><span class="p">;</span>
</pre></div>

<p>The application should now render in the browser like this now:</p>
<p><img src="../../images/screenshots/react-app-with-main-layout.png" alt="Index page with main layout styles applied" /><br />
</p>
<h2 id="style-the-login-page-layout">Style the Login Page Layout</h2>
<p>We’ll use the <code>MainLayout</code> component for most of our pages, but the <code>/login</code> route will have a unique layout applied to it. The layout will consist of a single form horizontally and vertically centered on a light grey background. As with the <code>Button</code> component in the previous section, it would be wise to create a reusable <code>TextInput</code> component to use throughout the application. We’ll begin by creating a <code>TextInput</code> directory in <code>components</code> and adding the following code to its <code>index.js</code> file:</p>
<p></p>
<div class="code-context">
<p>client/src/components/TextInput/index.js</p>
</div>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">TextInput</span><span class="p">({</span>
  <span class="nx">className</span><span class="p">,</span>
  <span class="nx">error</span><span class="p">,</span>
  <span class="nx">hiddenLabel</span><span class="p">,</span>
  <span class="nx">id</span><span class="p">,</span>
  <span class="nx">inputWidthClass</span><span class="p">,</span>
  <span class="nx">label</span><span class="p">,</span>
  <span class="nx">name</span><span class="p">,</span>
  <span class="nx">onChange</span><span class="p">,</span>
  <span class="nx">placeholder</span><span class="p">,</span>
  <span class="nx">type</span><span class="p">,</span>
  <span class="nx">value</span><span class="p">,</span>
  <span class="p">...</span><span class="nx">rest</span>
<span class="p">})</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">className</span><span class="p">}&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span>
        <span class="na">htmlFor</span><span class="o">=</span><span class="p">{</span><span class="nx">id</span><span class="p">}</span>
        <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="sb">`block font-semibold </span><span class="si">${</span><span class="nx">hiddenLabel</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;sr-only&quot;</span><span class="si">}</span><span class="sb">`</span><span class="p">}</span>
      <span class="p">&gt;</span>
        <span class="p">{</span><span class="nx">label</span><span class="p">}</span>
      <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span>
        <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="sb">`appearance-none bg-transparent focus:bg-gray-100 border-b-2 border-red-500 focus:border-red-700 focus:outline-none mr-2 px-3 py-2 text-gray-800 text-sm sm:text-base </span><span class="si">${</span><span class="nx">inputWidthClass</span><span class="si">}</span><span class="sb">`</span><span class="p">}</span>
        <span class="na">id</span><span class="o">=</span><span class="p">{</span><span class="nx">id</span><span class="p">}</span>
        <span class="na">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">onChange</span><span class="p">}</span>
        <span class="na">type</span><span class="o">=</span><span class="p">{</span><span class="nx">type</span><span class="p">}</span>
        <span class="na">placeholder</span><span class="o">=</span><span class="p">{</span><span class="nx">placeholder</span><span class="p">}</span>
        <span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
        <span class="p">{</span><span class="na">...rest</span><span class="p">}</span>
      <span class="p">/&gt;</span>
      <span class="p">{</span><span class="nx">error</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;text-red-500 text-sm&quot;</span><span class="p">&gt;{</span><span class="nx">error</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;}</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>

TextInput.defaultProps = <span class="p">{</span>
  <span class="nx">inputWidthClass</span><span class="o">:</span> <span class="s2">&quot;w-auto&quot;</span><span class="p">,</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span>
<span class="p">};</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">TextInput</span><span class="p">;</span>
</pre></div>

<p>Next, we’ll import that new component and the <code>Button</code> in <code>Login</code> page component’s file, remove the placeholder paragraph, and update it with the following content:</p>
<p></p>
<div class="code-context">
<p>client/src/pages/Login/index.js</p>
</div>
<div class="highlight"><pre><span></span><span class="hll"><span class="kr">import</span> <span class="nx">Button</span> <span class="nx">from</span> <span class="s2">&quot;../../components/Button&quot;</span><span class="p">;</span>
</span><span class="hll"><span class="kr">import</span> <span class="nx">TextInput</span> <span class="nx">from</span> <span class="s2">&quot;../../components/TextInput&quot;</span><span class="p">;</span>
</span>
<span class="kd">function</span> <span class="nx">Login</span><span class="p">()</span> <span class="p">{</span>
<span class="hll">  <span class="k">return</span> <span class="p">(</span>
</span><span class="hll">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-gray-50 flex items-center justify-center min-h-screen&quot;</span><span class="p">&gt;</span>
</span><span class="hll">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-white shadow p-8 max-w-sm w-10/12&quot;</span><span class="p">&gt;</span>
</span><span class="hll">        <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;mb-4 text-2xl&quot;</span><span class="p">&gt;</span>Welcome to Bibliotech<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span><span class="hll">        <span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>
</span><span class="hll">          <span class="p">&lt;</span><span class="nt">TextInput</span>
</span><span class="hll">            <span class="na">className</span><span class="o">=</span><span class="s">&quot;mb-4&quot;</span>
</span><span class="hll">            <span class="na">hiddenLabel</span>
</span><span class="hll">            <span class="na">id</span><span class="o">=</span><span class="s">&quot;username&quot;</span>
</span><span class="hll">            <span class="na">inputWidthClass</span><span class="o">=</span><span class="s">&quot;w-full&quot;</span>
</span><span class="hll">            <span class="na">label</span><span class="o">=</span><span class="s">&quot;Username&quot;</span>
</span><span class="hll">            <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Your username&quot;</span>            
</span><span class="hll">            <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span>
</span><span class="hll">          <span class="p">/&gt;</span>
</span><span class="hll">          <span class="p">&lt;</span><span class="nt">TextInput</span>
</span><span class="hll">            <span class="na">className</span><span class="o">=</span><span class="s">&quot;mb-8&quot;</span>
</span><span class="hll">            <span class="na">hiddenLabel</span>
</span><span class="hll">            <span class="na">id</span><span class="o">=</span><span class="s">&quot;password&quot;</span>
</span><span class="hll">            <span class="na">inputWidthClass</span><span class="o">=</span><span class="s">&quot;w-full&quot;</span>
</span><span class="hll">            <span class="na">label</span><span class="o">=</span><span class="s">&quot;Password&quot;</span>
</span><span class="hll">            <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Your password&quot;</span>
</span><span class="hll">            <span class="na">type</span><span class="o">=</span><span class="s">&quot;password&quot;</span>
</span><span class="hll">          <span class="p">/&gt;</span>
</span><span class="hll">          <span class="p">&lt;</span><span class="nt">Button</span> <span class="na">text</span><span class="o">=</span><span class="s">&quot;Log In&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="p">/&gt;</span>
</span><span class="hll">        <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span><span class="hll">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span class="hll">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span class="hll">  <span class="p">);</span>
</span><span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">Login</span><span class="p">;</span>
</pre></div>

<p>The updated <code>/login</code> route should now render as follows:</p>
<p><img src="../../images/screenshots/react-app-login-form-1.png" alt="Login route updated with a sign-in form" /><br />
</p>
<p>Now we need to consider how users will initially sign up, and ideally, there will be some way to toggle the view of this form to work for new sign-ups as well. To do that, we’ll need to manage some state. And to manage state, we’ll need to use <a href="https://reactjs.org/docs/hooks-intro.html">React Hooks</a>. If you’re new to hooks, they offer a cleaner API to manage state in React components than what traditional lifecycle methods have afforded in a React <code>Component</code> subclass. To use hooks, we must keep in mind their two basic rules:</p>
<ol type="1">
<li>Only call hooks <strong>at the top level</strong> of a React component function (they can’t be called from inside loops, conditionals, or other nested functions)</li>
<li>Only call hooks <strong>from React components or within other custom hooks that you create</strong> (so we can’t call them from within regular JavaScript functions)</li>
</ol>
<p>Using the <code>useState</code> hook will allow us to manage state conveniently within a component but without using a class-based component. When we call the <code>useState</code> hook, we can pass in an initial value for the state (or nothing at all) and it returns the current state value plus a function for updating that state in a tuple-like array. For this form, we’ll need to add a boolean value to the component’s state that tracks whether the user has identified as already being a member of Bibliotech. If they are, then we’ll render fields to log in, otherwise, we’ll render additional fields to facilitate the user sign-up process.</p>
<p>Let’s import the <code>useState</code> hook from React and call it in the <code>Login</code> page component:</p>
<p></p>
<div class="code-context">
<p>client/src/pages/Login/index.js</p>
</div>
<div class="highlight"><pre><span></span><span class="hll"><span class="kr">import</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;react&quot;</span><span class="p">;</span>
</span><span class="hll">
</span><span class="c1">// ...</span>

<span class="kd">function</span> <span class="nx">Login</span><span class="p">()</span> <span class="p">{</span>
<span class="hll">  <span class="kr">const</span> <span class="p">[</span><span class="nx">isMember</span><span class="p">,</span> <span class="nx">setIsMember</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span><span class="hll">  
</span>  <span class="c1">// ...</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">Login</span><span class="p">;</span>
</pre></div>

<p>Again, <code>isMember</code> is the current state value and <code>setIsMember</code> is a function that we can call to update that state to a new value. Let’s use both now to conditionally render some of the existing text in the form so that it’s relevant to new users. We’ll toggle the state value back and forth when the user clicks on the new button:</p>
<p></p>
<div class="code-context">
<p>client/src/pages/Login/index.js</p>
</div>
<div class="highlight"><pre><span></span><span class="c1">// ...</span>

<span class="kd">function</span> <span class="nx">Login</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="p">[</span><span class="nx">isMember</span><span class="p">,</span> <span class="nx">setIsMember</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-gray-50 flex items-center justify-center min-h-screen&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-white shadow p-8 max-w-sm w-10/12&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;mb-4 text-2xl&quot;</span><span class="p">&gt;</span>Welcome to Bibliotech<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>
          <span class="p">{</span><span class="cm">/* ... */</span><span class="p">}</span>
<span class="hll">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;flex items-center&quot;</span><span class="p">&gt;</span>
</span><span class="hll">            <span class="p">&lt;</span><span class="nt">Button</span>
</span><span class="hll">              <span class="na">className</span><span class="o">=</span><span class="s">&quot;mr-2&quot;</span>
</span><span class="hll">              <span class="na">text</span><span class="o">=</span><span class="p">{</span><span class="nx">isMember</span> <span class="o">?</span> <span class="s2">&quot;Log In&quot;</span> <span class="o">:</span> <span class="s2">&quot;Sign Up&quot;</span><span class="p">}</span>
</span><span class="hll">              <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span>
</span><span class="hll">            <span class="p">/&gt;</span>
</span><span class="hll">            <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;text-gray-400&quot;</span><span class="p">&gt;</span>
</span><span class="hll">              <span class="p">{</span><span class="nx">isMember</span> <span class="o">?</span> <span class="s2">&quot;New here?&quot;</span> <span class="o">:</span> <span class="s2">&quot;Already joined?&quot;</span><span class="p">}</span>
</span><span class="hll">            <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span class="hll">            <span class="p">&lt;</span><span class="nt">button</span>
</span><span class="hll">              <span class="na">className</span><span class="o">=</span><span class="s">&quot;text-red-500 hover:text-red-700 ml-1 focus:outline-none hover:underline&quot;</span>
</span><span class="hll">              <span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">event</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span class="hll">                <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span class="hll">                <span class="nx">setIsMember</span><span class="p">(</span><span class="nx">state</span> <span class="p">=&gt;</span> <span class="o">!</span><span class="nx">state</span><span class="p">);</span>
</span><span class="hll">              <span class="p">}}</span>
</span><span class="hll">            <span class="p">&gt;</span>
</span><span class="hll">              <span class="p">{</span><span class="nx">isMember</span> <span class="o">?</span> <span class="s2">&quot;Sign up.&quot;</span> <span class="o">:</span> <span class="s2">&quot;Log in.&quot;</span><span class="p">}</span>
</span><span class="hll">            <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span class="hll">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span>        <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">Login</span><span class="p">;</span>
</pre></div>

<p>Lastly, we’ll conditionally render two additional fields in the form to capture a user’s full name and email address when they sign up as well:</p>
<p></p>
<div class="code-context">
<p>client/src/pages/Login/index.js</p>
</div>
<div class="highlight"><pre><span></span><span class="c1">// ...</span>

<span class="kd">function</span> <span class="nx">Login</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="p">[</span><span class="nx">isMember</span><span class="p">,</span> <span class="nx">setIsMember</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-gray-50 flex items-center justify-center min-h-screen&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;bg-white shadow p-8 max-w-sm w-10/12&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="o">=</span><span class="s">&quot;mb-4 text-2xl&quot;</span><span class="p">&gt;</span>Welcome to Bibliotech<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">TextInput</span>
            <span class="na">className</span><span class="o">=</span><span class="s">&quot;mb-4&quot;</span>
            <span class="na">hiddenLabel</span>
            <span class="na">id</span><span class="o">=</span><span class="s">&quot;username&quot;</span>
            <span class="na">inputWidthClass</span><span class="o">=</span><span class="s">&quot;w-full&quot;</span>
            <span class="na">label</span><span class="o">=</span><span class="s">&quot;Username&quot;</span>
            <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Your username&quot;</span>
            <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span>
          <span class="p">/&gt;</span>
<span class="hll">          <span class="p">{</span><span class="o">!</span><span class="nx">isMember</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span><span class="hll">            <span class="p">&lt;&gt;</span>
</span><span class="hll">              <span class="p">&lt;</span><span class="nt">TextInput</span>
</span><span class="hll">                <span class="na">className</span><span class="o">=</span><span class="s">&quot;mb-4&quot;</span>
</span><span class="hll">                <span class="na">hiddenLabel</span>
</span><span class="hll">                <span class="na">id</span><span class="o">=</span><span class="s">&quot;email&quot;</span>
</span><span class="hll">                <span class="na">inputWidthClass</span><span class="o">=</span><span class="s">&quot;w-full&quot;</span>
</span><span class="hll">                <span class="na">label</span><span class="o">=</span><span class="s">&quot;Email&quot;</span>
</span><span class="hll">                <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Your email&quot;</span>
</span><span class="hll">                <span class="na">type</span><span class="o">=</span><span class="s">&quot;email&quot;</span>
</span><span class="hll">              <span class="p">/&gt;</span>
</span><span class="hll">              <span class="p">&lt;</span><span class="nt">TextInput</span>
</span><span class="hll">                <span class="na">className</span><span class="o">=</span><span class="s">&quot;mb-4&quot;</span>
</span><span class="hll">                <span class="na">hiddenLabel</span>
</span><span class="hll">                <span class="na">id</span><span class="o">=</span><span class="s">&quot;name&quot;</span>
</span><span class="hll">                <span class="na">inputWidthClass</span><span class="o">=</span><span class="s">&quot;w-full&quot;</span>
</span><span class="hll">                <span class="na">label</span><span class="o">=</span><span class="s">&quot;Full Name&quot;</span>
</span><span class="hll">                <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Your full name&quot;</span>
</span><span class="hll">                <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span>
</span><span class="hll">              <span class="p">/&gt;</span>
</span><span class="hll">            <span class="p">&lt;/&gt;</span>
</span><span class="hll">          <span class="p">)}</span>
</span>          <span class="p">{</span><span class="cm">/* ... */</span><span class="p">}</span>
        <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">Login</span><span class="p">;</span>
</pre></div>

<p>The form will now look like this when initially loaded:</p>
<p><img src="../../images/screenshots/react-app-login-form-2.png" alt="Login route with the updated sign-in form" /><br />
</p>
<p>And when the “Sign up” button is clicked, the form will re-render as follows:</p>
<p><img src="../../images/screenshots/react-app-login-form-3.png" alt="Login route with the sign-up form toggled on" /><br />
</p>
<h2 id="summary">Summary</h2>
<p>At the end of this chapter, we have a solid foundation in place for Bibliotech’s new React application. We added the Tailwind CSS framework to style it and React Router to handle routing. We also applied a common layout to the index and home pages and roughed out a form that will allow existing users to log in or new users to sign up. In the next chapter, we’ll finally add our GraphQL API into the mix by installing Apollo Client and sending queries to the API to populate the front-end application with real data.</p>
<footer>
<p class="copyright">Copyright © 2021 <a href="https://8bit.press/">8-Bit Press Inc.</a> All rights reserved.</p>
</footer>
</div>
</div>
<script>
(function () {
  "use strict";

  const chapter = document.getElementById("chapter");

  // Set width of fixed-position chapter navigation based on parent
  function setChapterNavWidth() {
    const chapterNav = document.getElementsByClassName("chapter-nav")[0];
    let { width: chapterWidth } = chapter.getBoundingClientRect();
    chapterNav.setAttribute(
      "style",
      `width: ${chapterWidth >= 960 ? chapterWidth * 0.3 + 36 + "px" : "100%"}`
    );
  }

  setChapterNavWidth();
  window.addEventListener("resize", setChapterNavWidth);

  // Open and close the book navigation in the masthead
  const openMastheadButton = document.getElementById("masthead-open");
  const closeMastheadButton = document.getElementById("masthead-close");
  const masthead = document.getElementById("masthead");

  openMastheadButton.addEventListener("click", function (event) {
    event.stopPropagation();
    masthead.style.marginLeft = "0px";
  });

  closeMastheadButton.addEventListener("click", function () {
    masthead.style.marginLeft = "-100%";
  });

  chapter.addEventListener("click", function () {
    if (masthead.style.marginLeft === "0px") {
      masthead.style.marginLeft = "-100%";
    }
  });

  // Add "Copy" button to code snippets
  // Reference: https://tomspencer.dev/blog/2018/09/14/adding-click-to-copy-buttons-to-a-hugo-powered-blog/
  if (!document.queryCommandSupported("copy")) {
    return;
  }

  function flashCopyMessage(el, msg) {
    el.textContent = msg;
    setTimeout(function () {
      el.textContent = "Copy";
    }, 1000);
  }

  function selectText(node) {
    const selection = window.getSelection();
    const range = document.createRange();
    range.selectNodeContents(node);
    selection.removeAllRanges();
    selection.addRange(range);
    return selection;
  }

  function addCopyButton(containerEl) {
    const copyBtn = document.createElement("button");
    copyBtn.className = "highlight-copy-btn";
    copyBtn.textContent = "Copy";

    var codeEl = containerEl.firstElementChild;
    copyBtn.addEventListener("click", function () {
      try {
        const selection = selectText(codeEl);
        document.execCommand("copy");
        selection.removeAllRanges();

        flashCopyMessage(copyBtn, "Copied!");
      } catch (e) {
        console && console.log(e);
        flashCopyMessage(copyBtn, "Failed :'(");
      }
    });

    containerEl.appendChild(copyBtn);
  }

  // Add copy button to code blocks
  var highlightBlocks = document.getElementsByClassName("highlight");
  Array.prototype.forEach.call(highlightBlocks, addCopyButton);
})();
</script>
</body>
</html>